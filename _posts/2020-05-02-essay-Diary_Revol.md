---
layout: post
title:  "회사 리뷰 - revol"
subtitle:   "2번째 회사"
categories: essay
tags: Diary revol
---

### 2019년 9월 수습기간을 가지다.
2번째 회사로 취업했다. HTF(High Frequency Trading)플랫폼과 알고리즘을 개발하는 모집공고로 들어갔다.  
1개월간 수습이였는데 한 달동안 Scala를 잘 사용할 수 있는지를 기준으로 합격여부를 정했다.  
아쉽게도 같은 입사자였던 Charlie씨는 1~2주동안 같이 Scala를 배우다가 따로 상담을 받더니 나갔다.  
아마 교육일정에 비해 조금씩 진도가 밀려서 판단을 한 것으로 보인다.


### 파일 기반 DB
트레이딩 중에 Database연결이 끊기는 경우 거래내역의 불일치를 방지하기 위한 라이브러리이며 파일 시스템을 이용하여 간단한 DB구조를 생성한다.  
폴더명을 Table로 하고 파일명을 Primary Key로 지정하여 파일 내부에 Json형식으로 Data를 저장한다.  
- Language: Scala  

수습기간에 시작한 프로젝트로 레볼에서 처음으로 만든 라이브러리다.  
기능변경이나 유지보수를 쉽게 하기위해서 직접 개발을 했다.  


### 개발자는 나 포함 2명
3명이서 공동창업(투자자, 트레이너, 개발자)을 하고 트레이더 3명과 나를 채용하여 총 7명이다.  
트레이딩 플랫폼은 C++, Scala로 이루어져 있지만 UI로 조작하는 솔루션이 없어 퀀트 트레이더도 거래 알고리즘을 Scala로 개발한다.  
개발자 1명이서 모든 시스템을 구축했기 때문에 대단하다고 생각한다.  
같이 일해본지 며칠 안지났지만 일방적으로 명령을 내린다기보다는 토의를 통해 남을 배려하면서 일한다는 뉘앙스를 받을 수 있었다.  
덕분에 더 열심히 일할 수 있는 동기가 되었다.


### 증거금 서비스
옵션 매매에 필요한 증거금산출 서비스이다.  
KRX거래소에서 만든 [PC COMS](http://regulation.krx.co.kr/contents/RGL/06/06020400/RGL06020400.jsp)를 참고하여 개발하였다.
- Language: Scala  

개발하는 것보다 검증하는데 더 오래걸렸다. 계산식은 따라 만들면 그만인데 해당 계산에 필요한 올바른 변수값들을 어디서 가져오는지를 몰라 KRX거래소에 문의하는데 한 달 걸렸다.  
해당 변수값을 산출하는 방법이 정해져있지만 설명 마지막에 KRX가 임의로 정한다고 적혀 있어 해당 파라미터를 가져오는 Crawler도 같이 개발했다.  
원래 의도는 서비스개발이였으나 적용을 하지 못해 라이브러리 개발로 끝났다.


### 지속적인 개발
저번 회사는 요구사항을 받아 개발하고 납품하는 삼성 SI회사였다. 이번 회사는 스스로 요구사항을 만들고 발전해나가는 회사라 만족스럽다.  
자신의 서비스를 확인하면서 내 코드가 실제로 돌아가는 것을 확인하고 개선할 점과 새로 추가할 점들을 파악한 후 업데이트 하는 방식이 맘에 들었다.  
납품하면 고치지 못하는 것과 다르게 급하게 기능을 만들어 코드가 더러워도 단위테스트를 통해 다음 업데이트때 정리해서 조금씩 발전하는 방식이 재밌었다.  
다만 아쉬운건 보안과 참여한 기간이 짧아 코어부분을 참여하지 못한 것과 상사가 너무 바빠 내가 만든 기능을 적용하기 힘든 점이였다. 코어부분(C++, Scala)을 혼자서 하시다보니 항상 바쁘셨다.


### 주식매매
도쿄증권거래소에서 퀀트 트레이딩 알고리즘 개발, 운영 및 유지보수  
새로운 트레이딩 알고리즘을 만들거나 기존에 만든 트레이딩 알고리즘을 개선하고 수익성을 높이기 위해 여러 서비스를 추가개발  
- Language: Scala, Python
- 기타 서비스
  - 매매 결과와 DB의 불일치 확인 서비스(Scala)
  - 거래에 사용하기 위한 데이터를 수집하는 Crawer서비스(Scala)
  - 날짜와 IP를 지정하면 일자별로 나눠 분산 백테스트 및 결과 데이터를 Private Repo와 Slack으로 전송(Python)  

개발 적용 중 하루 거래를 실수하여 50만원을 손해봤다. 내가 개발하고 상사분이 코드리뷰를 하셨지만 둘 다 과도한 요청으로 네트워크 지연이 발생하여 올바르지 않은 거래를 하여 손실을 봤다.  
상사분은 얼떨결에 기존에 만든 불일치 서비스(Reconcile)가 정상 동작하는 것도 확인했다며 별거 아닌걸로 넘어갔지만 나는 잠깐사이에 손실로 하루종일 긴장을 할 수 밖에 없었다.  
다행히 당일 오류 파악 및 수정을 끝내 Akka의 비동기 메시지에서 주의점을 확인할 수 있었고 다음날부터 다시 20 ~ 50만원의 수익을 얻을 수 있었다.


### 첫 해고를 당하다.
당일 듣기로는 공동창업자중 트레이더분이 증거금을 잘못 계산하셔서 회사 자금이 줄어들었다고 했다.  
월급이 밀리는 것보다는 실업급여를 받는것이 낫지 않겠느냐라고 하시면서 해고를 하셨다.  
맞는 말이긴 해서 큰 불만은 없이 나왔다. 오히려 이 이야기를 들은 다른 분들이 화내시더라. ㅎㅎ  
증거금산출 서비스를 우선순위로 먼저 적용했으면 미래가 달라지지 않았을까 하는 상상을 해봤지만 이미 지난 일이라 어쩔 수 없다고 생각한다.  
회사에 불만은 별로 없는 상태로 나온지라 오히려 개발자가 적으면 이런 문제가 발생할 수 있겠구나 싶었다.


### 정리하면서
짧은 시간이였지만 이번 회사를 통해 내가 다니고 싶은 회사가 어떤 회사인지 더 구체적으로 할 수 있었다.  
지속적으로 개선, 추가를 할 수 있는 자사 서비스 혹은 솔루션이 존재하는 회사이다.  
개발 언어는 크게 중요하지 않은 것 같다. :)